# 报表接口
## 月结
### 获取月结月份
#### url GET /api/yj/monthly/{分公司组织ID}
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 0,
        "stage": "STAGE_UNSTART",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": null,
        "endTime": null,
        "createTime": null,
        "updateTime": null,
        "message": null,
        "branchName": null
    },
    "code": "0",
    "message": null
}
```
### 开始月结
#### url POST /api/yj/monthly/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "extension": null,
    "code": "0",
    "message": null
}
```

### 获取月结进度状态
#### url GET /api/yj/monthly/progress/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 1,
        "stage": "STAGE_START",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": "2018-06-29T11:41:31",
        "endTime": null,
        "createTime": "2018-06-29T11:41:31",
        "updateTime": null,
        "message": "开始月结",
        "branchName": null
    },
    "code": "0",
    "message": null
}
```

### 取消月结
#### url POST /api/yj/monthly/cancel/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 1,
        "stage": "STAGE_CANCEL_WAIT",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": "2018-06-29T11:41:31",
        "endTime": null,
        "createTime": "2018-06-29T11:41:31",
        "updateTime": null,
        "message": "开始月结",
        "branchName": null
    },
    "code": "0",
    "message": null
}
```

### 离职人员业绩确认查询
#### url GET /api/yj/monthly/yjqr/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "pageIndex": 0,
    "pageSize": 0,
    "totalCount": 1,
    "extension": [
        {
            "id": "A3CF5D7A-8BB9-4981-86D1-B6EF092A7F95", //id
            "yyyymm": 201805,
            "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
            "belongId": "040cd10e-16d0-456e-b12c-ee80027b5f94",
            "position": "70f40d00-552d-9978-3cde-d415a2a96af8",
            "userId": "12da29dc-df75-401a-b77b-7d64204bd79f",
            "cjbgId": "test",
            "cjbgInputTime": "2018-05-25T19:28:21",
            "cjbgAuditTime": "2018-05-25T19:28:29",
            "cjbgCjTime": "2018-05-25T19:28:35",
            "distributeId": "test",
            "yjType": 2,
            "cjUser": "12da29dc-df75-401a-b77b-7d64204bd79f",
            "ftType": "MTKS",
            "mustConfirm": true,
            "isInclude": false, //是否包含
            "isAdd": false,
            "cjUserName": "张其",
            "userInfo": {
                "belongId": "040cd10e-16d0-456e-b12c-ee80027b5f94",
                "rzDate": "2018-06-29T18:34:43",
                "lzDate": null,
                "isLz": null,
                "userId": "12da29dc-df75-401a-b77b-7d64204bd79f",
                "userName": "张其",
                "trueName": null,
                "orgFullname": null,
                "positionType": "POSITION_ZYGW",
                "position": "70f40d00-552d-9978-3cde-d415a2a96af8",
                "positionName": "超级职业顾问",
                "isparttime": null
            },
            "cjbgbh": null //成交报告编号
        }
    ],
    "code": "0",
    "message": null
}
```


### 离职人员业绩确认提交
#### url POST /api/yj/monthly/yjqr/{分公司组织ID}/{月结年月如201806，固定6位}
请求
```JSON
 [
    {
        "id": "A3CF5D7A-8BB9-4981-86D1-B6EF092A7F95",
        "isInclude": false
    }
]
```
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 1,
        "stage": "STAGE_START",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": "2018-06-29T20:04:55.2965169+08:00",
        "endTime": null,
        "createTime": null,
        "updateTime": null,
        "message": "开始月结",
        "branchName": null
    },
    "code": "0",
    "message": null
}
```

### 追佣实扣确认查询
#### url GET /api/yj/monthly/skqr/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "pageIndex": 0,
    "pageSize": 0,
    "totalCount": 1,
    "extension": [
        {
            "yyyymm": 201805,
            "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
            "userId": "12da29dc-df75-401a-b77b-7d64204bd79f",
            "belongId": "040cd10e-16d0-456e-b12c-ee80027b5f94",
            "position": "70f40d00-552d-9978-3cde-d415a2a96af8",
            "byTc": 10000, //本月提成
            "syZyYe": 1000, //上月追佣余额
            "byZyYj": 10000,
            "byZyTc": 200, //本月追佣金额
            "byDzyTc": 1200, //本月应扣除金额
            "byKjJe": 1200, //本月实际扣减
            "bySf": 0,
            "byZyYe": 0, 
            "byHy": 0,
            "byCjTc": 0,
            "ljYfTc": 0,
            "userInfo": {
                "belongId": "040cd10e-16d0-456e-b12c-ee80027b5f94",
                "rzDate": "2018-06-29T18:34:43",
                "lzDate": null,
                "isLz": null,
                "userId": "12da29dc-df75-401a-b77b-7d64204bd79f",
                "userName": "张其",
                "trueName": null,
                "orgFullname": null,
                "positionType": "POSITION_ZYGW",
                "position": "70f40d00-552d-9978-3cde-d415a2a96af8",
                "positionName": "超级职业顾问",
                "isparttime": null
            }
        }
    ],
    "code": "0",
    "message": null
}
```


### 追佣实扣确认提交
#### url POST /api/yj/monthly/skqr/{分公司组织ID}/{月结年月如201806，固定6位}
请求
```JSON
 [
    {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "userId": "12da29dc-df75-401a-b77b-7d64204bd79f",
        "belongId": "040cd10e-16d0-456e-b12c-ee80027b5f94",
        "position": "70f40d00-552d-9978-3cde-d415a2a96af8",
        "byKjJe": 1100
    }
]
```
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 1,
        "stage": "STAGE_START",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": "2018-06-29T20:04:55.2965169+08:00",
        "endTime": null,
        "createTime": null,
        "updateTime": null,
        "message": "开始月结",
        "branchName": null
    },
    "code": "0",
    "message": null
}
```


### 月结回滚
#### url POST /api/yj/monthly/rollback/{分公司组织ID}/{月结年月如201806，固定6位}
应答
```JSON
{
    "extension": {
        "yyyymm": 201805,
        "branchId": "2090ffe4-333c-420a-a437-574e161dcdd6",
        "running": 1,
        "stage": "STAGE_ROLLBACKING",
        "progress": 0,
        "opUser": "5cfe1b85-360b-4014-94bc-3e37cece7339",
        "startTime": "2018-06-29T11:41:31",
        "endTime": null,
        "createTime": "2018-06-29T11:41:31",
        "updateTime": null,
        "message": "开始月结",
        "branchName": null
    },
    "code": "0",
    "message": null
}
```


## 财务报表
### 财务-人数分摊表
#### url POST /api/yj/report/rsft
请求体
```JSON
{
	"branchId":"265",
	"yyyymm":201806,
	"pageSize":1,
	"pageIndex":1
}
```
应答
```JSON
{
    "pageIndex": 1,
    "pageSize": 1,
    "totalCount": 5,
    "extension": [
        {
            "yyyymm": 201806,
            "branchId": "265",
            "belongId": "340",
            "zjRs": 8,
            "ftRs": 2,
            "rs": 10,
            "branchLevel1Name": "事业一部",
            "branchLevel2Name": "三区",
            "branchLevel3Name": "1组",
            "branchName": "成都新耀行"
        }
    ],
    "code": "0",
    "message": null
}
```