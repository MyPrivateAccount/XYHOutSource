webpackJsonp([34],{2162:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e){return{orgList:e.basicData.orgInfo.orgList,userList:e.basicData.userList,sourceUserList:e.basicData.sourceUserList,targetUserList:e.basicData.targetUserList,auditList:e.search.auditList,sourceCustomerList:e.search.sourceCustomerList,targetCustomerList:e.search.targetCustomerList,activeAuditHistory:e.search.activeAuditHistory,showLoading:e.search.showLoading,showAuditDetail:e.search.showAuditDetail}}function s(e){return{dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0});var c=a(92),l=a(1302),u=a(0),p=a.n(u),d=a(46),h=a(2163),m=a(27),g=a.n(m),f=a(562),y=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),b=(d.J.TreeNode,d.A.Option),v={itemBorder:{height:"80px",border:"1px solid #ccc",width:"80%",margin:"5px 10px",padding:"3px"},img:{width:"70px",border:"1px solid #ccc",borderRadius:"5px",verticalAlign:"middle"}},C=function(e){function t(){var e,a,i,o;n(this,t);for(var s=arguments.length,c=Array(s),u=0;u<s;u++)c[u]=arguments[u];return a=i=r(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(c))),i.state={selectedMenuKey:"auditing",customerDataSource:[],targetKeys:[],pagination:{current:1,pageSize:10,total:0},activeAuditInfo:{}},i.handleMenuChange=function(e){console.log("\u83dc\u5355\u5207\u6362:",e),i.setState({selectedMenuKey:e.key},function(){var t=h.a.mySubmit;"auditing"===e.key?t.examineStatus=[1]:"passed"===e.key?t.examineStatus=[2]:"rejected"===e.key&&(t.examineStatus=[3]),t.pageIndex=0,console.log("condition:",t),i.props.dispatch(Object(l.A)(!0)),i.props.dispatch(Object(l.l)(t))})},i.handleOrgChange=function(e,t){console.log("\u90e8\u95e8\u5207\u6362:",e),"source"===t?i.props.dispatch(Object(l.e)()):i.props.dispatch(Object(l.f)()),i.props.dispatch(Object(l.t)({organizationIds:[e],pageIndex:0,pageSize:1e4,type:t}))},i.handleChangePage=function(e,t){var a=h.a.mySubmit;a.pageIndex=e-1,i.props.dispatch(Object(l.A)(!0)),i.props.dispatch(Object(l.l)(a))},i.handleUserChange=function(e,t){var a="source"===t?h.a.sourceCondition:h.a.targetCondition;a.userID=e,console.log("\u4e1a\u52a1\u5458\u5207\u6362\u5904\u7406:",e,t,a),i.props.dispatch(Object(l.n)(a))},i.handleCustomerChange=function(e){console.log("\u5ba2\u6237\u9009\u62e9\u53d8\u66f4",e)},i.handleAdjustCustomer=function(e){},i.handleRemoveCustomerAudit=function(e){console.log("\u5220\u9664deleteCustomer",e),i.props.dispatch(Object(l.x)(e.id))},i.handleAdjustAgain=function(e){var t=i.props.activeAuditHistory;if(t.content&&t.content.startsWith("{"))try{var a=JSON.parse(t.content);i.props.dispatch(Object(l.A)(!0)),i.props.dispatch(Object(l.a)(a))}catch(e){}},i.handleAuditClick=function(e){console.log("\u5ba1\u6838\u8be6\u7ec6:",e),i.setState({activeAuditInfo:e}),i.props.dispatch(Object(l.A)(!0)),i.props.dispatch(Object(l.k)(e.id)),i.props.dispatch(Object(l.v)(e))},i.getSourceHeader=function(){var e=i.props.sourceUserList||[];return p.a.createElement("div",null,"\u5f52\u5c5e\u90e8\u95e8\uff1a",p.a.createElement(d.J,{style:{width:"100px"},allowClear:!0,dropdownStyle:{width:200,maxHeight:400,overflow:"auto"},onChange:function(e){return i.handleOrgChange(e,"source")},treeData:i.props.orgList}),"\u5f52\u5c5e\u4e1a\u52a1\u5458\uff1a",p.a.createElement(d.A,{style:{width:"100px"},onChange:function(e){return i.handleUserChange(e,"source")}},e.map(function(e){return p.a.createElement(b,{key:e.id,value:e.id},e.userName)})))},i.getTargetHeader=function(){var e=i.props.targetUserList||[];return p.a.createElement("div",null,"\u63a5\u6536\u90e8\u95e8\uff1a",p.a.createElement(d.J,{style:{width:"100px"},allowClear:!0,dropdownStyle:{maxHeight:400,overflow:"auto"},onChange:function(e){return i.handleOrgChange(e,"target")},treeData:i.props.orgList}),"\u63a5\u6536\u4e1a\u52a1\u5458\uff1a",p.a.createElement(d.A,{style:{width:"100px"},onChange:function(e){return i.handleUserChange(e,"target")}},e.map(function(e){return p.a.createElement(b,{key:e.id,value:e.id},e.userName)})))},o=a,r(i,o)}return i(t,e),y(t,[{key:"componentWillMount",value:function(){var e=h.a.mySubmit;e.pageIndex=0,this.props.dispatch(Object(l.A)(!0)),this.props.dispatch(Object(l.l)(e)),this.props.dispatch(Object(l.A)(!0))}},{key:"componentWillReceiveProps",value:function(e){var t={pageSize:e.auditList.pageSize,current:e.auditList.pageIndex,total:e.auditList.totalCount};this.setState({pagination:t})}},{key:"render",value:function(){var e=this,t=this.props.auditList.extension||[],a=(this.props.sourceCustomerList,this.props.targetCustomerList,Object(f.default)("customerAuditInfo")),n=this.props.activeAuditHistory;return console.log("\u83b7\u53d6\u5230activeAuditHistory:",n),p.a.createElement("div",null,this.props.showAuditDetail?p.a.createElement(d.B,{spinning:this.props.showLoading},p.a.createElement(a,{contentInfo:n,removeCallback:this.handleRemoveCustomerAudit}),p.a.createElement("div",{style:{width:"80%",textAlign:"center"}},3===n.examineStatus?p.a.createElement(d.g,{type:"primary",onClick:this.handleAdjustAgain},"\u518d\u6b21\u53d1\u8d77\u8c03\u5ba2"):null)):p.a.createElement("div",null,p.a.createElement(d.t,{onClick:this.handleMenuChange,selectedKeys:[this.state.selectedMenuKey],mode:"horizontal"},p.a.createElement(d.t.Item,{key:"auditing"},"\u5ba1\u6838\u4e2d"),p.a.createElement(d.t.Item,{key:"passed"},"\u5ba1\u6838\u901a\u8fc7"),p.a.createElement(d.t.Item,{key:"rejected"},"\u5ba1\u6838\u9a73\u56de")),p.a.createElement(d.B,{spinning:this.props.showLoading},t.map(function(t){return p.a.createElement("div",{style:v.itemBorder,key:t.id},p.a.createElement(d.z,null,p.a.createElement(d.k,{span:3},p.a.createElement(d.p,{type:"export",style:{fontSize:"48px"}})),p.a.createElement(d.k,{span:16},p.a.createElement(d.z,{style:{marginBottom:"10px",cursor:"pointer"}},p.a.createElement(d.k,{span:20,onClick:function(a){return e.handleAuditClick(t)}},p.a.createElement("b",null,t.contentName||"\u672a\u547d\u540d"))),p.a.createElement(d.z,{style:{marginBottom:"5px",fontSize:"0.9rem"}},p.a.createElement(d.k,null,t.taskName),p.a.createElement(d.k,null,t.desc))),p.a.createElement(d.k,{span:5},p.a.createElement(d.z,{style:{marginBottom:"20px",textAlign:"right"}},p.a.createElement(d.k,null,g()(t.submitTime).format("YYYY-MM-DD HH:mm:ss"))))))}),p.a.createElement(d.z,null,p.a.createElement(d.k,{style:{marginTop:"20px"}},p.a.createElement(d.v,Object.assign({},this.state.pagination,{onChange:this.handleChangePage})))))))}}]),t}(u.Component);t.default=Object(c.b)(o,s)(C)},2163:function(e,t,a){"use strict";var n={mySubmit:{examineStatus:[1],contentTypes:["TransferCustomer"],pageIndex:0,pageSize:10,listType:"mySubmit"},sourceCondition:{type:"source",pageIndex:0,pageSize:1e4,userID:""},targetCondition:{type:"target",pageIndex:0,pageSize:1e4,userID:""}};t.a=n}});
//# sourceMappingURL=34.282b02fa.chunk.js.map