{"version":3,"sources":["../static/js/35.4d7bfa64.chunk.js","houseResource/pages/message/sendMessage.js"],"names":["webpackJsonp","1891","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","apptableMapStateToProps","state","showLoading","msg","changeList","shop","buildingInfo","index","user","oidc","profile","apptableMapDispatchToProps","dispatch","defineProperty","__WEBPACK_IMPORTED_MODULE_0_react_redux__","__WEBPACK_IMPORTED_MODULE_1__actions_actionCreator__","__WEBPACK_IMPORTED_MODULE_2_react__","__WEBPACK_IMPORTED_MODULE_2_react___default","n","__WEBPACK_IMPORTED_MODULE_3_antd__","__WEBPACK_IMPORTED_MODULE_4__utils_appUtils__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","FormItem","Item","TextArea","Option","SendMessage","_Component","_ref","_temp","_this","_ret","this","_len","arguments","args","Array","_key","getPrototypeOf","apply","concat","showPreview","handlePreview","e","preventDefault","form","validateFieldsAndScroll","err","values","showPreviewDialog","handleSend","myBuildingList","validateFields","id","ext1","find","building","buildingId","basicInfo","name","handleReset","resetFields","city","City","newProps","info","title","content","a","createElement","onOk","getFieldDecorator","formItemLayout","labelCol","span","wrapperCol","console","log","style","padding","spinning","assign","label","rules","required","message","min","max","width","placeholder","initialValue","map","build","rows","onChange","hanldeRejectReson","paddingLeft","onClick","type","margin","WrappedApp"],"mappings":"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","file":"static/js/35.4d7bfa64.chunk.js","sourcesContent":["webpackJsonp([35],{\n\n/***/ 1891:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react_redux__ = __webpack_require__(92);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__actions_actionCreator__ = __webpack_require__(1216);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__utils_appUtils__ = __webpack_require__(1221);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var FormItem=__WEBPACK_IMPORTED_MODULE_3_antd__[\"o\" /* Form */].Item;var TextArea=__WEBPACK_IMPORTED_MODULE_3_antd__[\"q\" /* Input */].TextArea;var Option=__WEBPACK_IMPORTED_MODULE_3_antd__[\"A\" /* Select */].Option;var SendMessage=function(_Component){_inherits(SendMessage,_Component);function SendMessage(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SendMessage);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SendMessage.__proto__||Object.getPrototypeOf(SendMessage)).call.apply(_ref,[this].concat(args))),_this),_this.state={showPreview:false},_this.handlePreview=function(e){e.preventDefault();_this.props.form.validateFieldsAndScroll(function(err,values){if(!err){// console.log(\"values\", values);\n_this.showPreviewDialog(values);}});},_this.handleSend=function(e){var myBuildingList=_this.props.changeList||[];e.preventDefault();_this.props.form.validateFields(function(err,values){if(!err){values.id=Object(__WEBPACK_IMPORTED_MODULE_4__utils_appUtils__[\"a\" /* NewGuid */])();values.ext1=myBuildingList.find(function(building){return building.id===values.buildingId;}).basicInfo.name;// console.log(\"消息内容:\", values);\n_this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_1__actions_actionCreator__[\"_132\" /* setMsgLoading */])());_this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_1__actions_actionCreator__[\"_130\" /* sendBuildingMsg */])(values));}});},_this.handleReset=function(e){_this.props.form.resetFields();},_temp),_possibleConstructorReturn(_this,_ret);}_createClass(SendMessage,[{key:'componentWillMount',value:function componentWillMount(){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_1__actions_actionCreator__[\"_11\" /* getChangeBuildingList */])({city:this.props.user.City}));}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(newProps){}//消息预览\n//消息发送\n},{key:'showPreviewDialog',//显示预览对话框\nvalue:function showPreviewDialog(msg){__WEBPACK_IMPORTED_MODULE_3_antd__[\"u\" /* Modal */].info({title:msg.title,content:__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement('p',null,msg.content)),onOk:function onOk(){}});}},{key:'render',value:function render(){var getFieldDecorator=this.props.form.getFieldDecorator;var formItemLayout={labelCol:{span:4},wrapperCol:{span:20}};var myBuildingList=this.props.changeList||[];var id=void 0;console.log(myBuildingList,this.props.buildingInfo,'/??');if(myBuildingList.length!==0){id=(this.props.buildingInfo||{}).id;}return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement('div',{style:{padding:'25px 5px'}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"B\" /* Spin */],{spinning:this.props.showLoading},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"z\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"k\" /* Col */],{span:12},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u6807\\u9898'}),getFieldDecorator('title',{rules:[{required:true,message:'请输入标题!'},{min:3,message:\"标题不少于3个字符!\"},{max:20,message:\"最多只能输入20个字符!\"}]})(__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"q\" /* Input */],{style:{width:'300px'},placeholder:'\\u8BF7\\u8F93\\u5165\\u6807\\u9898'}))))),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"z\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"k\" /* Col */],{span:12},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u76F8\\u5173\\u697C\\u76D8'}),getFieldDecorator('buildingId',{initialValue:id,rules:[{required:true,message:'请选择相关楼盘!'}]})(__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"A\" /* Select */],{style:{width:'300px'}},myBuildingList.map(function(build){return __WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(Option,{key:build.id,value:build.id},build.basicInfo.name);})))))),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"z\" /* Row */],null,__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"k\" /* Col */],{span:12},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(FormItem,Object.assign({},formItemLayout,{label:'\\u5185\\u5BB9\\u63CF\\u8FF0'}),getFieldDecorator('content',{rules:[{required:true,message:'请输入驳回原因!'},{max:2000,message:\"最多只能输入20个字符!\"}]})(__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(TextArea,{rows:6,style:{width:'450px'},onChange:this.hanldeRejectReson,placeholder:'请输入消息内容!'}))))),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"z\" /* Row */],{style:{paddingLeft:'8%'}},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"k\" /* Col */],{span:12},__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"g\" /* Button */],{onClick:this.handleReset,type:'primary',style:{margin:'5px'}},'\\u91CD\\u7F6E'),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"g\" /* Button */],{onClick:this.handlePreview,type:'primary',style:{margin:'5px'}},'\\u9884\\u89C8'),__WEBPACK_IMPORTED_MODULE_2_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd__[\"g\" /* Button */],{onClick:this.handleSend,type:'primary',style:{margin:'5px'}},'\\u53D1\\u5E03')))));}}]);return SendMessage;}(__WEBPACK_IMPORTED_MODULE_2_react__[\"Component\"]);function apptableMapStateToProps(state){// console.log(\"nowInfo:\", state.index.nowInfo);\n// console.log(\"searchList:\", state.shop.changeList);\nreturn{showLoading:state.msg.showLoading,changeList:state.shop.changeList,// nowInfo: state.index.nowInfo,\nbuildingInfo:state.index.buildingInfo,user:(state.oidc.user||{}).profile||{}};}function apptableMapDispatchToProps(dispatch){return{dispatch:dispatch};}var WrappedApp=__WEBPACK_IMPORTED_MODULE_3_antd__[\"o\" /* Form */].create()(SendMessage);/* harmony default export */ __webpack_exports__[\"default\"] = (Object(__WEBPACK_IMPORTED_MODULE_0_react_redux__[\"b\" /* connect */])(apptableMapStateToProps,apptableMapDispatchToProps)(WrappedApp));\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/35.4d7bfa64.chunk.js","import { connect } from 'react-redux';\r\nimport { sendBuildingMsg, setMsgLoading,getChangeBuildingList } from '../../actions/actionCreator';\r\nimport React, { Component } from 'react';\r\nimport { Button, Row, Col, Input, Form, Select, notification, Modal, Spin } from 'antd';\r\nimport { NewGuid } from '../../../utils/appUtils';\r\n\r\nconst FormItem = Form.Item;\r\nconst { TextArea } = Input;\r\nconst Option = Select.Option;\r\n\r\nclass SendMessage extends Component {\r\n    state = {\r\n        showPreview: false\r\n    }\r\n    componentWillMount() {\r\n        this.props.dispatch(getChangeBuildingList({city: this.props.user.City}))\r\n    }\r\n    componentWillReceiveProps(newProps) {\r\n    }\r\n    //消息预览\r\n    handlePreview = (e) => {\r\n        e.preventDefault();\r\n        this.props.form.validateFieldsAndScroll((err, values) => {\r\n            if (!err) {\r\n                // console.log(\"values\", values);\r\n                this.showPreviewDialog(values);\r\n            }\r\n        });\r\n    }\r\n    //消息发送\r\n    handleSend = (e) => {\r\n        let myBuildingList = this.props.changeList || [];\r\n        e.preventDefault();\r\n        this.props.form.validateFields((err, values) => {\r\n            if (!err) {\r\n                values.id = NewGuid();\r\n                values.ext1 = myBuildingList.find(building => building.id === values.buildingId).basicInfo.name;\r\n                // console.log(\"消息内容:\", values);\r\n                this.props.dispatch(setMsgLoading());\r\n                this.props.dispatch(sendBuildingMsg(values));\r\n            }\r\n        })\r\n    }\r\n    //显示预览对话框\r\n    showPreviewDialog(msg) {\r\n        Modal.info({\r\n            title: msg.title,\r\n            content: (\r\n                <div>\r\n                    <p>{msg.content}</p>\r\n                </div>\r\n            ),\r\n            onOk() { },\r\n        });\r\n    }\r\n    handleReset = (e) => {\r\n        this.props.form.resetFields();\r\n    }\r\n    render() {\r\n        const { getFieldDecorator } = this.props.form;\r\n        const formItemLayout = {\r\n            labelCol: { span: 4 },\r\n            wrapperCol: { span: 20 },\r\n        };\r\n        let myBuildingList = this.props.changeList || [];\r\n        let id;\r\n        console.log(myBuildingList, this.props.buildingInfo,'/??')\r\n        if (myBuildingList.length !== 0) {\r\n            id = (this.props.buildingInfo || {}).id\r\n        }\r\n        return (\r\n            <div style={{ padding: '25px 5px' }}>\r\n                <Spin spinning={this.props.showLoading}>\r\n                    <Row>\r\n                        <Col span={12}>\r\n                            <FormItem  {...formItemLayout} label=\"标题\">\r\n                                {getFieldDecorator('title', {\r\n                                    rules: [{ required: true, message: '请输入标题!' }, { min: 3, message: \"标题不少于3个字符!\" }, { max: 20, message: \"最多只能输入20个字符!\" }],\r\n                                })(\r\n                                    <Input style={{ width: '300px' }} placeholder=\"请输入标题\" />\r\n                                    )}\r\n                            </FormItem>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={12}>\r\n                            <FormItem  {...formItemLayout} label=\"相关楼盘\">\r\n                                {getFieldDecorator('buildingId', {\r\n                                    initialValue: id,\r\n                                    rules: [{ required: true, message: '请选择相关楼盘!' }],\r\n                                })(\r\n                                    <Select style={{ width: '300px' }} >\r\n                                        {\r\n                                            myBuildingList.map(build => <Option key={build.id} value={build.id}>{build.basicInfo.name}</Option>)\r\n                                        }\r\n                                    </Select>\r\n                                    )}\r\n                            </FormItem>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row>\r\n                        <Col span={12}>\r\n                            <FormItem  {...formItemLayout} label=\"内容描述\">\r\n                                {getFieldDecorator('content', {\r\n                                    rules: [{ required: true, message: '请输入驳回原因!' }, { max: 2000, message: \"最多只能输入20个字符!\" }],\r\n                                })(\r\n                                    <TextArea rows={6} style={{ width: '450px' }} onChange={this.hanldeRejectReson} placeholder={'请输入消息内容!'} />\r\n                                    )}\r\n                            </FormItem>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row style={{ paddingLeft: '8%' }}>\r\n                        <Col span={12}>\r\n                            <Button onClick={this.handleReset} type='primary' style={{ margin: '5px' }}>重置</Button>\r\n                            <Button onClick={this.handlePreview} type='primary' style={{ margin: '5px' }}>预览</Button>\r\n                            <Button onClick={this.handleSend} type='primary' style={{ margin: '5px' }}>发布</Button>\r\n                        </Col>\r\n                    </Row>\r\n                </Spin>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n\r\nfunction apptableMapStateToProps(state) {\r\n    // console.log(\"nowInfo:\", state.index.nowInfo);\r\n    // console.log(\"searchList:\", state.shop.changeList);\r\n    return {\r\n        showLoading: state.msg.showLoading,\r\n        changeList: state.shop.changeList,\r\n        // nowInfo: state.index.nowInfo,\r\n        buildingInfo: state.index.buildingInfo,\r\n        user: (state.oidc.user || {}).profile || {},\r\n    }\r\n}\r\n\r\nfunction apptableMapDispatchToProps(dispatch) {\r\n    return {\r\n        dispatch\r\n    };\r\n}\r\nconst WrappedApp = Form.create()(SendMessage);\r\nexport default connect(apptableMapStateToProps, apptableMapDispatchToProps)(WrappedApp);\n\n\n// WEBPACK FOOTER //\n// ./src/houseResource/pages/message/sendMessage.js"],"sourceRoot":""}