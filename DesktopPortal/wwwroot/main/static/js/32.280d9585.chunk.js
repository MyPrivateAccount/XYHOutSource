webpackJsonp([32],{2069:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{appList:e.app.appList,operInfo:e.privilege.operInfo,privilegeList:e.privilege.privilegeList}}function p(e){return{dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),o=a.n(s),c=a(92),u=a(46),d=a(1281),h=a(2070),f=a(120),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),g=u.A.Option,v=u.s.Header,b=(u.s.Sider,u.s.Content),y=function(e){function t(){var e,a,r,l;n(this,t);for(var p=arguments.length,s=Array(p),c=0;c<p;c++)s[c]=arguments[c];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={condition:{privilegeName:"",appID:""},checkList:[],selectAppId:"",showLoading:!1},r.privilegeTableColumns=[{title:"\u9009\u62e9",dataIndex:"id",key:"check",render:function(e,t){return o.a.createElement("span",null,o.a.createElement(u.j,{defaultChecked:!1,onChange:function(e){return r.handleCheckChange(e,t.id)}}))}},{title:"\u6743\u9650\u540d",dataIndex:"name",key:"name"},{title:"\u5206\u7ec4\u540d",dataIndex:"groups",key:"groups"},{title:"\u5bf9\u5e94\u5de5\u5177",dataIndex:"applicationId",key:"applicationId",render:function(e,t){var a="";for(var n in r.props.appList)if(r.props.appList[n].id==t.applicationId){a=r.props.appList[n].displayName;break}return o.a.createElement("span",null,a)}},{title:"\u7f16\u8f91",dataIndex:"edit",key:"edit",render:function(e,t){return o.a.createElement(u.H,{title:"\u6743\u9650\u7f16\u8f91"},o.a.createElement(u.g,{type:"primary",shape:"circle",icon:"edit",size:"small",onClick:function(e){return r.handleEditClick(t)}}))}}],r.handleAppChange=function(e){console.log("handleAppChange\uff0cappID\uff1a",e),r.setState({selectAppId:e})},r.handleAddClick=function(e){r.props.dispatch(Object(d.z)(r.state.selectAppId))},r.confirmDelete=function(e){var t=[];r.state.checkList.map(function(e,a){e.status&&t.push(e.id)}),console.log("\u786e\u5b9a\u5220\u9664\uff1a",t),r.props.dispatch(Object(d.A)({delKeys:t,searchAppid:r.state.selectAppId}))},r.cancelDelete=function(e){console.log("\u4e0d\u5220\u9664",e)},r.handleSearch=function(e){console.log("search",r.state.selectAppId),r.setState({showLoading:!0}),r.props.dispatch(Object(d.D)({appid:r.state.selectAppId}))},r.handleCheckChange=function(e,t){var a=e.target.checked,n=r.state.checkList.slice(),i=!1;for(var l in n)if(n[l].id==t){n[l].status=a,i=!0;break}i||n.push({id:t,status:a}),r.setState({checkList:n})},l=a,i(r,l)}return r(t,e),m(t,[{key:"componentWillMount",value:function(){if(console.log("\u52a0\u8f7d\u6743\u9650\u5217\u8868\uff1a",this.props.appList),this.props.appList.length>0){var e=this.props.appList[0].id;this.setState({selectAppId:e}),this.props.dispatch(Object(d.D)({appid:e,appList:this.props.appList}))}else this.props.dispatch(Object(d.D)({appid:null}))}},{key:"componentWillReceiveProps",value:function(e){if(this.setState({showLoading:!1}),""==this.state.selectAppId&&this.props.appList.length>0){var t=this.props.appList[0].id;this.setState({selectAppId:t})}}},{key:"handleEditClick",value:function(e){this.props.dispatch(Object(d.C)(e))}},{key:"getAppIcon",value:function(e){var t="appstore",a=e.applicationType,n=f.a.find(function(e){return e.key===a});return n&&(t=n.icon),t}},{key:"render",value:function(){var e=this,t=!(this.state.checkList.filter(function(e){return e.status}).length>0);return o.a.createElement("div",{className:"relative"},o.a.createElement(u.s,null,o.a.createElement(v,null,"\u5e94\u7528\u6743\u9650\u5217\u8868",o.a.createElement(u.H,{title:"\u65b0\u589e\u6743\u9650"},"\xa0",o.a.createElement(u.g,{type:"primary",shape:"circle",icon:"plus",onClick:this.handleAddClick})),o.a.createElement(u.H,{title:"\u5220\u9664\u6743\u9650"},o.a.createElement(u.w,{title:"\u786e\u8ba4\u8981\u5220\u9664\u9009\u4e2d\u6743\u9650\u9879?",onConfirm:this.confirmDelete,onCancel:this.cancelDelete,okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88"},"\xa0",o.a.createElement(u.g,{type:"primary",shape:"circle",icon:"delete",disabled:t,onClick:this.handleDeleteClick})))),o.a.createElement(b,{className:"content"},o.a.createElement(u.z,{style:{border:"solid 1px rgba(87, 83, 83, 0.13)",padding:"5px"}},o.a.createElement(u.k,{span:6},"\u6240\u5c5e\u5e94\u7528\xa0",o.a.createElement(u.A,{style:{width:120},onChange:this.handleAppChange,placeholder:"\u8bf7\u9009\u62e9\u5e94\u7528",defaultValue:this.state.selectAppId},this.props.appList.map(function(t,a){return o.a.createElement(g,{key:t.id,value:t.id},o.a.createElement(u.p,{type:e.getAppIcon(t)}),t.displayName)}))),o.a.createElement(u.k,{span:6},o.a.createElement(u.g,{type:"primary",icon:"search",onClick:this.handleSearch},"\u67e5\u8be2"))),o.a.createElement(u.B,{spinning:this.state.showLoading},o.a.createElement(u.D,{rowKey:"id",columns:this.privilegeTableColumns,dataSource:this.props.privilegeList})),o.a.createElement(h.a,null))))}}]),t}(s.Component);t.default=Object(c.b)(l,p)(y)},2070:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{appList:e.app.appList,operInfo:e.privilege.operInfo,activePrivilege:e.privilege.activePrivilege,selectAppId:e.privilege.selectAppId}}function p(e){return{dispatch:e}}var s=a(92),o=a(0),c=a.n(o),u=a(46),d=a(1281),h=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=u.o.Item,m=u.A.Option,g=function(e){function t(){var e,a,r,l;n(this,t);for(var p=arguments.length,s=Array(p),o=0;o<p;o++)s[o]=arguments[o];return a=r=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={dialogTitle:"",visible:!1,selectAppId:"",privilegeInfo:{}},r.handleAppTypeChange=function(e){console.log("menu click",e),r.setState({selectAppId:e})},r.handleOk=function(e){e.preventDefault();var t=r.props.operInfo.operType;r.props.form.validateFields(function(e,a){if(!e){console.log("Received values of form: ",a);var n="add"==t?"POST":"PUT";r.props.dispatch(Object(d.E)({method:n,data:a,searchAppid:r.state.selectAppId}))}})},r.handleCancel=function(e){r.props.dispatch(Object(d.B)())},l=a,i(r,l)}return r(t,e),h(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.activePrivilege,a=e.selectAppId,n=e.operInfo.operType;if("edit"==n){if(t)for(var i in this.props.appList){var r=this.props.appList[i];r.id==t.applicationId&&this.setState({selectAppId:r.id})}this.setState({visible:!0,dialogTitle:"\u6743\u9650\u7f16\u8f91",privilegeInfo:t})}else if("add"==n){var l="";""!=a&&(l=a),this.setState({visible:!0,dialogTitle:"\u6743\u9650\u65b0\u589e",privilegeInfo:{applicationId:l},selectAppId:l})}else this.props.form.resetFields(),this.setState({visible:!1})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}};return c.a.createElement(u.u,{width:600,title:this.state.dialogTitle,maskClosable:!1,visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},c.a.createElement(u.z,null,c.a.createElement(u.k,{span:12}," ",c.a.createElement(f,Object.assign({},t,{label:c.a.createElement("span",null,"\u6743\u9650\u7f16\u53f7"),hasFeedback:!0}),e("id",{initialValue:this.state.privilegeInfo.id,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u7f16\u53f7!"}]})(c.a.createElement(u.q,{style:{float:"left"}})))),c.a.createElement(u.k,{span:12},c.a.createElement(f,Object.assign({},t,{label:c.a.createElement("span",null,"\u6743\u9650\u540d\u79f0"),hasFeedback:!0}),e("name",{initialValue:this.state.privilegeInfo.name,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6743\u9650\u540d\u79f0!"}]})(c.a.createElement(u.q,null))))),c.a.createElement(u.z,null,c.a.createElement(u.k,{span:12}," ",c.a.createElement(f,Object.assign({},t,{label:c.a.createElement("span",null,"\u5206\u7ec4\u540d\u79f0"),hasFeedback:!0}),e("groups",{initialValue:this.state.privilegeInfo.groups,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5206\u7ec4\u540d\u79f0!"}]})(c.a.createElement(u.q,{style:{float:"left"}})))),c.a.createElement(u.k,{span:12},c.a.createElement(f,Object.assign({},t,{label:c.a.createElement("span",null,"\u6240\u5c5e\u5e94\u7528"),hasFeedback:!0}),e("applicationId",{initialValue:this.state.privilegeInfo.applicationId})(c.a.createElement(u.A,{style:{width:120},onChange:this.handleAppTypeChange},this.props.appList.map(function(e,t){return c.a.createElement(m,{key:e.id,value:e.id},e.displayName)})))))))}}]),t}(o.Component),v=u.o.create()(g);t.a=Object(s.b)(l,p)(v)}});
//# sourceMappingURL=32.280d9585.chunk.js.map